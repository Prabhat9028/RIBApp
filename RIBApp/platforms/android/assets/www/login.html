<div>
<div class="container">
		   <div class="row" style="margin-top:60px">
		   <div class="col-xs-12">
			<h1 class="logo">CarSecure</h1>
			</div>
			</div>
		 <div class="login-form">
			<div class="row" style="margin-top:40px">
			<form data-ng-submit="login()">
				<div class="form-group">
					<input type="text" name="username" ng-model="carsecure.login.username" class="form-control" placeholder="Email" required>
				</div>
				<div class="form-group">
					<input type="password" name="password" ng-model="carsecure.login.password" class="form-control" placeholder="Password" required>
				</div>
				<div class="form-group"><input type="submit" ng-click="registerPush()" class="form-control btn btn-primary" value="Login"></div>
			</form>
			</div>
		</div>
		<div class="redirect">
			<span>Do not have an account?&nbsp;&nbsp;&nbsp;Register&nbsp;&nbsp;&nbsp;<a ng-click="signup()">here</a> </span>
		</div>
		<div class="creators">
			Created by Prajyot Walali, Prabhat Singh and Ranvijay Prajapati.
		</div>
	</div>
</div>

<script>	
var pushNotification;
function registerPush() {
	debugger;
          try {
            pushNotification = window.plugins.pushNotification;
            console.log(pushNotification);
            pushNotification.register(successHandler, errorHandler, {"senderID":"501436039618","ecb":"onNotification"});
          }
          catch(err) {
            txt="There was an error on this page.\n\n";
            txt+="Error description: " + err.message + "\n\n";
            console.log(txt);
          }
        }

       function successHandler (result) {
          console.log('result = ' + result);
        }
        
        function errorHandler (error) {
          console.log('error = ' + error);
        }

       function onNotification(e) {
          switch( e.event ) {
            case 'registered':
                  if ( e.regid.length > 0 ){
                    // Your GCM push server needs to know the regID before it can push to this device
                    // here is where you might want to send it the regID for later use.
                    console.log("regID = " + e.regid);
                    localStorage.setItem("gcmId", e.regid);
                  }
                   break;                    
            case 'message':
                  // if this flag is set, this notification happened while we were in the foreground.
                  // you might want to play a sound to get the user's attention, throw up a dialog, etc.
                  if (e.foreground) {                      
                      console.log("received message in forground");
                  }
                  else  {
                  // otherwise we were launched because the user touched a notification in the notification tray.
                      if (e.coldstart)
                        console.log('--COLDSTART NOTIFICATION--');
                      else
                        console.log('--BACKGROUND NOTIFICATION--');
                  }
//                  console.log('MESSAGE -> MSG: ' + e.payload.message);
//                  console.log('MESSAGE -> MSGCNT: ' + e.payload.msgcnt);
                  break;
            case 'error':
                  console.log('ERROR -> MSG:' + e.msg);
                  break;
            default:
                  console.log('EVENT -> Unknown, an event was received and we do not know what it is');
                  break;
          }
        }



</script>